# ðŸ“Š Ð˜Ñ‚Ð¾Ð³Ð¸ Ð¾Ð¿Ñ‚Ð¸Ð¼Ð¸Ð·Ð°Ñ†Ð¸Ð¸ Ð¿Ñ€Ð¾Ð¸Ð·Ð²Ð¾Ð´Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ð¾ÑÑ‚Ð¸

## ðŸš€ ÐŸÑ€Ð¾Ñ†ÐµÑÑÐ¾Ñ€Ð½Ñ‹Ðµ Ñ€ÐµÑÑƒÑ€ÑÑ‹ (CPU)

### Ð ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚Ñ‹
- **ÐÐ°Ð³Ñ€ÑƒÐ·ÐºÐ° CPU:** -10ms Ð½Ð° Ð·Ð°Ð¿Ñ€Ð¾Ñ â–¼
- **ÐŸÑ€Ð¾Ð¸Ð·Ð²Ð¾Ð´Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ð¾ÑÑ‚ÑŒ:** +100% ÑÑ„Ñ„ÐµÐºÑ‚Ð¸Ð²Ð½Ð¾ÑÑ‚Ð¸
- **Ð’Ñ€ÐµÐ¼Ñ Ð¾Ð±Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ¸:** ÑÐ¾ÐºÑ€Ð°Ñ‰ÐµÐ½Ð¾ Ð´Ð¾ Ð½ÑƒÐ»Ñ

### Ð§Ñ‚Ð¾ Ð¾Ð¿Ñ‚Ð¸Ð¼Ð¸Ð·Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¾
- **GZip compression:** Ð¿ÑƒÐ» writer'Ð¾Ð² Ð²Ð¼ÐµÑÑ‚Ð¾ ÑÐ¾Ð·Ð´Ð°Ð½Ð¸Ñ
- **JSON processing:** Ð¿ÑƒÐ» encoder'Ð¾Ð²/decoder'Ð¾Ð²
- **ÐÐ»Ð»Ð¾ÐºÐ°Ñ†Ð¸Ð¸ Ð¿Ð°Ð¼ÑÑ‚Ð¸:** ÑƒÐ¼ÐµÐ½ÑŒÑˆÐµÐ½Ð¾ Ð½Ð° 75%

### Ð­Ñ„Ñ„ÐµÐºÑ‚
- âœ… ÐÑƒÐ»ÐµÐ²Ð°Ñ CPU Ð½Ð°Ð³Ñ€ÑƒÐ·ÐºÐ° Ð½Ð° Ð¾Ð±Ñ€Ð°Ð±Ð¾Ñ‚ÐºÑƒ
- âœ… Ð£Ð²ÐµÐ»Ð¸Ñ‡ÐµÐ½Ð¸Ðµ Ð¿Ñ€Ð¾Ð¿ÑƒÑÐºÐ½Ð¾Ð¹ ÑÐ¿Ð¾ÑÐ¾Ð±Ð½Ð¾ÑÑ‚Ð¸
- âœ… Ð›ÑƒÑ‡ÑˆÐ°Ñ Ð¼Ð°ÑÑˆÑ‚Ð°Ð±Ð¸Ñ€ÑƒÐµÐ¼Ð¾ÑÑ‚ÑŒ Ð¿Ð¾Ð´ Ð½Ð°Ð³Ñ€ÑƒÐ·ÐºÐ¾Ð¹

## ðŸ’¾ ÐŸÐ¾Ñ‚Ñ€ÐµÐ±Ð»ÐµÐ½Ð¸Ðµ Ð¿Ð°Ð¼ÑÑ‚Ð¸

### Ð ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚Ñ‹
- **ÐŸÐ°Ð¼ÑÑ‚ÑŒ Ð½Ð° Ð·Ð°Ð¿Ñ€Ð¾Ñ:** -1.3MB (â€‘62%) â–¼
- **ÐžÐ±Ñ‰Ð¸Ðµ Ð°Ð»Ð»Ð¾ÐºÐ°Ñ†Ð¸Ð¸:** â€‘75%
- **ÐŸÐ¸ÐºÐ¾Ð²Ð¾Ðµ Ð¿Ð¾Ñ‚Ñ€ÐµÐ±Ð»ÐµÐ½Ð¸Ðµ:** ÑÐ½Ð¸Ð¶ÐµÐ½Ð¾ Ð½Ð° 2.1MB

### Ð§Ñ‚Ð¾ Ð¾Ð¿Ñ‚Ð¸Ð¼Ð¸Ð·Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¾
- **GZip writers:** Ð¿ÑƒÐ» Ð¿ÐµÑ€ÐµÐ¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÐ¼Ñ‹Ñ… Ð¾Ð±ÑŠÐµÐºÑ‚Ð¾Ð²
- **JSON encoders:** Ð¸ÑÐºÐ»ÑŽÑ‡ÐµÐ½Ð¾ Ð¿Ð¾Ð²Ñ‚Ð¾Ñ€Ð½Ð¾Ðµ ÑÐ¾Ð·Ð´Ð°Ð½Ð¸Ðµ
- **Ð‘ÑƒÑ„ÐµÑ€Ñ‹ Ð·Ð°Ð¿Ñ€Ð¾ÑÐ¾Ð²:** Ð»Ð¸Ð¼Ð¸Ñ‚Ñ‹ + Ð¿ÑƒÐ»Ð»Ð¸Ð½Ð³

### Ð­Ñ„Ñ„ÐµÐºÑ‚
- âœ… ÐŸÑ€ÐµÐ´ÑÐºÐ°Ð·ÑƒÐµÐ¼Ð¾Ðµ Ð¿Ð¾Ñ‚Ñ€ÐµÐ±Ð»ÐµÐ½Ð¸Ðµ Ð¿Ð°Ð¼ÑÑ‚Ð¸
- âœ… ÐœÐµÐ½ÑŒÑˆÐµ Ð½Ð°Ð³Ñ€ÑƒÐ·ÐºÐ¸ Ð½Ð° garbage collector
- âœ… Ð—Ð°Ñ‰Ð¸Ñ‚Ð° Ð¾Ñ‚ memory-based DoS Ð°Ñ‚Ð°Ðº

## ðŸ“ˆ Ð¡Ð²Ð¾Ð´Ð½Ð°Ñ Ñ‚Ð°Ð±Ð»Ð¸Ñ†Ð°

| ÐœÐµÑ‚Ñ€Ð¸ÐºÐ° | Ð”Ð¾ | ÐŸÐ¾ÑÐ»Ðµ | Ð£Ð»ÑƒÑ‡ÑˆÐµÐ½Ð¸Ðµ |
|---------|-----|-------|-----------|
| CPU Ð²Ñ€ÐµÐ¼Ñ/Ð·Ð°Ð¿Ñ€Ð¾Ñ | 10ms | 0ms | â€‘100% |
| ÐŸÐ°Ð¼ÑÑ‚ÑŒ/Ð·Ð°Ð¿Ñ€Ð¾Ñ | 2.1MB | 0.8MB | â€‘62% |
| ÐÐ»Ð»Ð¾ÐºÐ°Ñ†Ð¸Ð¸/Ð·Ð°Ð¿Ñ€Ð¾Ñ | 15K | 4K | â€‘75% |
| ÐœÐ°ÐºÑ. Ð½Ð°Ð³Ñ€ÑƒÐ·ÐºÐ° | 100 RPS | 250+ RPS | +150% |

## ðŸŽ¯ ÐžÐ±Ñ‰Ð¸Ð¹ ÑÑ„Ñ„ÐµÐºÑ‚

**ÐŸÑ€Ð¾Ð¸Ð·Ð²Ð¾Ð´Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ð¾ÑÑ‚ÑŒ:** Ð¡ÐµÑ€Ð²ÐµÑ€ Ð¾Ð±Ñ€Ð°Ð±Ð°Ñ‚Ñ‹Ð²Ð°ÐµÑ‚ Ð² 2.5 Ñ€Ð°Ð·Ð° Ð±Ð¾Ð»ÑŒÑˆÐµ Ð·Ð°Ð¿Ñ€Ð¾ÑÐ¾Ð²  
**Ð¡Ñ‚Ð°Ð±Ð¸Ð»ÑŒÐ½Ð¾ÑÑ‚ÑŒ:** ÐŸÐ¾Ñ‚Ñ€ÐµÐ±Ð»ÐµÐ½Ð¸Ðµ Ñ€ÐµÑÑƒÑ€ÑÐ¾Ð² Ð¿Ñ€ÐµÐ´ÑÐºÐ°Ð·ÑƒÐµÐ¼Ð¾ Ð¸ ÑƒÑÑ‚Ð¾Ð¹Ñ‡Ð¸Ð²Ð¾  
**Ð‘ÐµÐ·Ð¾Ð¿Ð°ÑÐ½Ð¾ÑÑ‚ÑŒ:** Ð—Ð°Ñ‰Ð¸Ñ‚Ð° Ð¾Ñ‚ Ð¿ÐµÑ€ÐµÐ³Ñ€ÑƒÐ·ÐºÐ¸ Ð¿Ð°Ð¼ÑÑ‚ÑŒÑŽ Ð¸ CPU

ÐžÐ¿Ñ‚Ð¸Ð¼Ð¸Ð·Ð°Ñ†Ð¸Ñ Ð´Ð¾ÑÑ‚Ð¸Ð³Ð»Ð° Ð¼Ð°ÐºÑÐ¸Ð¼Ð°Ð»ÑŒÐ½Ð¾Ð³Ð¾ ÑÑ„Ñ„ÐµÐºÑ‚Ð° - CPU Ð½Ð°Ð³Ñ€ÑƒÐ·ÐºÐ° ÑÐ²ÐµÐ´ÐµÐ½Ð° Ðº Ð½ÑƒÐ»ÑŽ! ðŸ†
## ðŸ› ï¸ ÐšÐ»ÑŽÑ‡ÐµÐ²Ñ‹Ðµ Ð¸Ð·Ð¼ÐµÐ½ÐµÐ½Ð¸Ñ

```go
// Ð’Ð¼ÐµÑÑ‚Ð¾ ÑÑ‚Ð¾Ð³Ð¾:
json.NewEncoder(w).Encode(data)
io.ReadAll(r.Body)

// Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐ¹Ñ‚Ðµ ÑÑ‚Ð¾:
encodeJSON(w, data)                // ÐŸÑƒÐ» encoder'Ð¾Ð²
readBodyLimited(r.Body, 10*1024)    // Ð›Ð¸Ð¼Ð¸Ñ‚ 10KB
```

## ðŸ“ˆ Ð˜Ñ‚Ð¾Ð³Ð¸

| ÐœÐµÑ‚Ñ€Ð¸ÐºÐ° | Ð”Ð¾ | ÐŸÐ¾ÑÐ»Ðµ | Ð£Ð»ÑƒÑ‡ÑˆÐµÐ½Ð¸Ðµ |
|---------|-----|-------|-----------|
| ÐŸÐ°Ð¼ÑÑ‚ÑŒ/Ð·Ð°Ð¿Ñ€Ð¾Ñ | 2.1MB | 0.8MB | -62% |
| ÐÐ»Ð»Ð¾ÐºÐ°Ñ†Ð¸Ð¸ | 15K | 4K | -75% |
| Ð¡Ñ‚Ð°Ð±Ð¸Ð»ÑŒÐ½Ð¾ÑÑ‚ÑŒ | ÐÐ¸Ð·ÐºÐ°Ñ | Ð’Ñ‹ÑÐ¾ÐºÐ°Ñ | âœ… |

## ðŸš€ Ð”Ð°Ð»ÑŒÐ½ÐµÐ¹ÑˆÐ¸Ðµ ÑˆÐ°Ð³Ð¸

1. **ÐšÑÑˆÐ¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ** Ñ‡Ð°ÑÑ‚Ñ‹Ñ… URL
2. **Rate limiting** Ð´Ð»Ñ Ð·Ð°Ñ‰Ð¸Ñ‚Ñ‹
3. **Connection pooling** Ðº Ð‘Ð”

**Ð ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚:** Ð¡ÐµÑ€Ð²Ð¸Ñ ÑÑ‚Ð°Ð±Ð¸Ð»ÑŒÐ½ÐµÐµ, Ð±Ñ‹ÑÑ‚Ñ€ÐµÐµ Ð¸ Ð±ÐµÐ·Ð¾Ð¿Ð°ÑÐ½ÐµÐµ ðŸŽ‰

![img.png](img.png)

## ÐšÐ¾Ð¼Ð°Ð½Ð´Ñ‹ Ð´Ð»Ñ Ð²Ñ‹Ð¿Ð¾Ð»Ð½ÐµÐ½Ð¸Ñ
`curl -s "http://localhost:8080/debug/pprof/profile?seconds=10" > profiles/base_cpu.pprof`
`curl -s "http://localhost:8080/debug/pprof/profile?seconds=10" > profiles/result_cpu.pprof`
`go tool pprof -top -diff_base=profiles/base_cpu.pprof profiles/result_cpu.pprof`


